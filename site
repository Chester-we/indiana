'use client'

import { useState } from 'react'
import { MessageCircle, Sparkles, AlertTriangle, CheckCircle } from 'lucide-react'

export default function QuizLandingPage() {
  const [currentStep, setCurrentStep] = useState('intro') // intro, quiz, results
  const [currentQuestion, setCurrentQuestion] = useState(0)
  const [answers, setAnswers] = useState<number[]>([])

  const questions = [
    {
      question: "Com que frequência você utiliza especiarias como açafrão, gengibre ou cardamomo em suas refeições principais?",
      options: [
        "Raramente, só em pratos específicos.",
        "Às vezes, mas só para dar sabor.",
        "Quase diariamente, como parte essencial da minha culinária."
      ]
    },
    {
      question: "Como você prioriza o seu sistema digestivo (o 'fogo metabólico') na sua rotina matinal?",
      options: [
        "Eu como o que está disponível, sem pensar muito.",
        "Eu tomo café forte para acordar.",
        "Eu começo com água morna e limão ou um chá de ervas para 'ligar' o meu metabolismo."
      ]
    },
    {
      question: "Qual é a sua atitude em relação ao exercício físico?",
      options: [
        "Só faço exercício se for intenso (academia, corrida).",
        "Eu busco movimentos leves e de alongamento (yoga, caminhada, etc.).",
        "Eu não me exercito regularmente."
      ]
    }
  ]

  const handleStartQuiz = () => {
    setCurrentStep('quiz')
  }

  const handleAnswerSelect = (answerIndex: number) => {
    const newAnswers = [...answers]
    newAnswers[currentQuestion] = answerIndex
    setAnswers(newAnswers)

    if (currentQuestion < questions.length - 1) {
      setTimeout(() => {
        setCurrentQuestion(currentQuestion + 1)
      }, 500)
    } else {
      setTimeout(() => {
        setCurrentStep('results')
      }, 500)
    }
  }

  const whatsappMessage = encodeURIComponent("Olá, fiz o quiz no site e quero adquirir o eBook 'O Segredo Milenar das Indianas' por 119 MT. Gostaria de saber como pagar.")
  const whatsappLink = `https://wa.me/258835187160?text=${whatsappMessage}`

  return (
    <div className="min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50">
      {/* Intro Section */}
      {currentStep === 'intro' && (
        <div className="container mx-auto px-4 py-8 md:py-16">
          <div className="max-w-4xl mx-auto text-center">
            {/* Decorative Element */}
            <div className="mb-8">
              <div className="w-20 h-20 mx-auto bg-gradient-to-br from-amber-400 to-orange-500 rounded-full flex items-center justify-center shadow-lg">
                <Sparkles className="w-10 h-10 text-white" />
              </div>
            </div>

            {/* Main Title */}
            <h1 className="text-3xl md:text-5xl lg:text-6xl font-bold mb-6 leading-tight">
              <span className="text-gray-800">PARE DE LUTAR!</span>
              <br />
              <span className="bg-gradient-to-r from-amber-600 via-orange-600 to-yellow-600 bg-clip-text text-transparent">
                Descubra Agora:
              </span>
              <br />
              <span className="text-gray-700 text-2xl md:text-3xl lg:text-4xl">
                Você já está no caminho para o corpo perfeito das Indianas?
              </span>
            </h1>

            {/* Subtitle */}
            <h2 className="text-xl md:text-2xl text-gray-600 mb-12 max-w-3xl mx-auto leading-relaxed">
              Faça nosso rápido{' '}
              <span className="font-bold text-emerald-600 bg-emerald-100 px-3 py-1 rounded-lg">
                QUIZ DE REVELAÇÃO
              </span>{' '}
              e descubra os segredos (e os erros fatais) da sua rotina de beleza e saúde.
            </h2>

            {/* CTA Button */}
            <button
              onClick={handleStartQuiz}
              className="bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 hover:from-amber-600 hover:via-orange-600 hover:to-red-600 text-white font-bold text-lg md:text-xl px-8 md:px-12 py-4 md:py-6 rounded-full shadow-2xl transform hover:scale-105 transition-all duration-300 hover:shadow-amber-500/25"
            >
              <span className="block">COMEÇAR O TESTE SECRETO AGORA!</span>
              <span className="text-sm opacity-90">(Grátis e Rápido)</span>
            </button>

            {/* Decorative Pattern */}
            <div className="mt-16 flex justify-center space-x-2">
              {[...Array(5)].map((_, i) => (
                <div
                  key={i}
                  className="w-3 h-3 bg-gradient-to-r from-amber-400 to-orange-400 rounded-full opacity-60"
                  style={{ animationDelay: `${i * 0.2}s` }}
                />
              ))}
            </div>
          </div>
        </div>
      )}

      {/* Quiz Section */}
      {currentStep === 'quiz' && (
        <div className="container mx-auto px-4 py-8 md:py-16">
          <div className="max-w-3xl mx-auto">
            {/* Progress Bar */}
            <div className="mb-8">
              <div className="flex justify-between items-center mb-4">
                <span className="text-sm font-medium text-gray-600">
                  Pergunta {currentQuestion + 1} de {questions.length}
                </span>
                <span className="text-sm font-medium text-emerald-600">
                  {Math.round(((currentQuestion + 1) / questions.length) * 100)}% completo
                </span>
              </div>
              <div className="w-full bg-gray-200 rounded-full h-3">
                <div
                  className="bg-gradient-to-r from-emerald-500 to-teal-500 h-3 rounded-full transition-all duration-500"
                  style={{ width: `${((currentQuestion + 1) / questions.length) * 100}%` }}
                />
              </div>
            </div>

            {/* Question Card */}
            <div className="bg-white rounded-2xl shadow-xl p-6 md:p-8 border border-amber-100">
              <h3 className="text-xl md:text-2xl font-bold text-gray-800 mb-8 leading-relaxed">
                {questions[currentQuestion].question}
              </h3>

              <div className="space-y-4">
                {questions[currentQuestion].options.map((option, index) => (
                  <button
                    key={index}
                    onClick={() => handleAnswerSelect(index)}
                    className="w-full text-left p-4 md:p-6 rounded-xl border-2 border-gray-200 hover:border-amber-400 hover:bg-amber-50 transition-all duration-300 transform hover:scale-[1.02] hover:shadow-lg"
                  >
                    <div className="flex items-start space-x-4">
                      <div className="w-6 h-6 rounded-full border-2 border-gray-300 flex-shrink-0 mt-1" />
                      <span className="text-gray-700 text-base md:text-lg leading-relaxed">
                        {option}
                      </span>
                    </div>
                  </button>
                ))}
              </div>
            </div>
          </div>
        </div>
      )}

      {/* Results Section */}
      {currentStep === 'results' && (
        <div className="container mx-auto px-4 py-8 md:py-16">
          <div className="max-w-4xl mx-auto">
            {/* Result Title */}
            <div className="text-center mb-12">
              <h2 className="text-3xl md:text-4xl lg:text-5xl font-bold mb-4">
                <span className="bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent">
                  RESULTADO REVELADO:
                </span>
              </h2>
              <p className="text-xl md:text-2xl text-gray-700 font-semibold">
                Você tem hábitos Indianos de Beleza e Saúde, mas precisa corrigir a rota!
              </p>
            </div>

            {/* Success Points */}
            <div className="bg-emerald-50 border-2 border-emerald-200 rounded-2xl p-6 md:p-8 mb-8">
              <div className="flex items-center mb-6">
                <Sparkles className="w-8 h-8 text-emerald-600 mr-3" />
                <h3 className="text-xl md:text-2xl font-bold text-emerald-800">
                  Duas Coisas que Você Já Está Fazendo de Certo:
                </h3>
              </div>
              <div className="space-y-4">
                <div className="flex items-start space-x-3">
                  <CheckCircle className="w-6 h-6 text-emerald-600 flex-shrink-0 mt-1" />
                  <p className="text-gray-700 text-lg">
                    Você tem atenção ao seu <strong>sono</strong> e hidratação.
                  </p>
                </div>
                <div className="flex items-start space-x-3">
                  <CheckCircle className="w-6 h-6 text-emerald-600 flex-shrink-0 mt-1" />
                  <p className="text-gray-700 text-lg">
                    Seu foco em <strong>alimentos integrais</strong> está alinhado com a sabedoria ancestral.
                  </p>
                </div>
              </div>
            </div>

            {/* Error Alert */}
            <div className="bg-red-50 border-2 border-red-200 rounded-2xl p-6 md:p-8 mb-8">
              <div className="flex items-center mb-6">
                <AlertTriangle className="w-10 h-10 text-red-600 mr-3" />
                <h3 className="text-2xl md:text-3xl font-bold text-red-800">
                  ⚠️ 4 ERROS ENCONTRADOS NA SUA ROTINA!
                </h3>
              </div>
              <p className="text-gray-700 text-lg md:text-xl leading-relaxed">
                Sua jornada para o corpo perfeito está sendo sabotada por quatro erros cruciais 
                que impedem seu metabolismo de queimar gordura de forma eficiente.
              </p>
            </div>

            {/* Solution */}
            <div className="bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-amber-200 rounded-2xl p-6 md:p-8 mb-8">
              <h3 className="text-2xl md:text-3xl font-bold text-gray-800 mb-4">
                A boa notícia é... existe uma solução completa!
              </h3>
              <p className="text-gray-700 text-lg md:text-xl leading-relaxed mb-6">
                O segredo para corrigir esses 4 erros e desbloquear seu corpo naturalmente perfeito 
                está no eBook:
              </p>
              <div className="bg-white rounded-xl p-6 shadow-lg border border-amber-200">
                <h4 className="text-xl md:text-2xl font-bold text-amber-800 text-center">
                  "O Segredo Milenar das Indianas para o Corpo Perfeito"
                </h4>
              </div>
            </div>

            {/* Price and CTA */}
            <div className="text-center">
              <div className="bg-gradient-to-r from-red-500 to-orange-500 text-white rounded-2xl p-6 md:p-8 mb-8 shadow-2xl">
                <h3 className="text-2xl md:text-3xl font-bold mb-4">
                  🔥 Adquira a sua solução completa AGORA
                </h3>
                <div className="text-4xl md:text-5xl font-bold mb-2">
                  por apenas <span className="text-yellow-300">119 MT</span>
                </div>
              </div>

              {/* WhatsApp Button */}
              <a
                href={whatsappLink}
                target="_blank"
                rel="noopener noreferrer"
                className="inline-flex items-center justify-center bg-green-500 hover:bg-green-600 text-white font-bold text-lg md:text-xl px-8 md:px-12 py-4 md:py-6 rounded-full shadow-2xl transform hover:scale-105 transition-all duration-300 hover:shadow-green-500/25"
              >
                <MessageCircle className="w-6 h-6 mr-3" />
                <span>SIM! QUERO O MEU EBOOK POR 119 MT</span>
              </a>

              <p className="text-sm text-gray-600 mt-4 max-w-2xl mx-auto">
                Clique no botão acima para ser direcionado ao WhatsApp e finalizar sua compra de forma segura e rápida.
              </p>
            </div>
          </div>
        </div>
      )}
    </div>
  )
}
